## User

### 1. Подать новую заявку на справку

**Описание:**

1. Сохраняет заявку в БД со статусом `New`.
2. Автоматически передает в 1С:Документооборот.
3. Если вызов был успешным, то меняет статус в БД на `Processing`.
4. Отображает пользователю сообщение «Ваша заявка успешно подана».

**Метод:** `POST`

**Параметры:**

-   `name` (`String`): ФИО Обучающегося.
-   `course` (`Int`): Курс Обучающегося.

**Ответ:**

-   `message` (`String`): Сообщение для отображения пользователю.

---

### 2. Получить лист своих заявок

**Описание:**

1. Получает список своих заявок (как активных, так и завершенных) из БД.

**Метод:** `GET`

**Параметры:**

-   `name` (`String`): ФИО Обучающегося.

**Ответ:**

-   `listOfRequests` (`List<Request>`): Список отправленных заявок обучающегося.

---

### 3. Открыть заявку

**Описание:**

1. Получает все данные по конкретной заявке из БД.

**Метод:** `GET`

**Параметры:**

-   `id` (`Guid`): Уникальный номер заявки.

**Ответ:**

-   `requestInformation` (`RequestInformation`): Подробные данные по конкретной заявке.

## Admin

### 1. Получить лист всех заявок по фильтрам

**Описание:**

1. Получает список заявок (как активных, так и завершенных) из БД по заданным фильтрам.

**Метод:** `GET`

**Параметры:**

-   `name` (`String?`): Фильтр для поиска по ФИО обучающегося.
-   `date` (`DateTime?`): Фильтр для поиска по времени подачи заявки.
-   `requestStatus` (`RequestStatus?`): Фильтр для поиска по статусу заявки. См. [Перечисление RequestStatus](#перечисление-enum-requeststatus).

**Ответ:**

-   `listOfRequests` (`List<Request>`): Список заявок по фильтрам.

---

### 2. Открыть заявку

**Описание:**

1. Получает все данные по конкретной заявке из БД.

**Метод:** `GET`

**Параметры:**

-   `id` (`Guid`): Уникальный номер заявки.

**Ответ:**

-   `requestInformation` (`RequestInformation`): Подробные данные по конкретной заявке.

---

### 3. Передать заявку в 1С:Документооборот

**Описание:**
Можно использовать вручную для повторной отправки в случае ошибки.

1. Передает данные заявки в 1С:Документооборот.
2. Меняет статус заявки в БД на `Processing` (если ответ от 1С был `Success`).

**Метод:** `POST`

**Параметры:**

-   `id` (`Guid`): Уникальный номер заявки.
-   `name` (`String`): ФИО Обучающегося.
-   `course` (`Int`): Курс Обучающегося.

**Ответ:**

-   `status` (`1CStatus`): Статус ответа от 1С:Документооборот. См. [Перечисление 1CStatus](#перечисление-enum-1cstatus).

---

### 4. Получить ответ от 1С:Документооборот, завершить заявку

**Описание:**

1. Получает ответ от 1С (`1CStatus`) и обновляет статус заявки в БД.
2. Далее выполняет следующие действия в зависимости от `status` (`1CStatus`):

| Входящий status | Итоговый статус в БД | Действие с файлом справки |
| :-------------- | :------------------- | :------------------------ |
| `Success`       | `Completed`          | Добавляется к заявке      |
| `Failure`       | `Rejected`           | Игнорируется              |

**Метод:** `POST`

**Параметры:**

-   `id` (`Guid`): Уникальный номер заявки.
-   `status` (`1CStatus`): Статус ответа от 1С:Документооборот. См. [Перечисление 1CStatus](#перечисление-enum-1cstatus).
-   `requestFile` (`File?`): Файл самой справки (прикрепляется при статусе `Success`).

**Ответ:**

-   Успешная обработка возвращает HTTP-статус `200 OK` без тела ответа.

---

## Описание моделей данных и перечислений

### Модели (Models)

#### Модель `Request`

Объект с краткой информацией о заявке, используется в списках.

-   `id` (`Guid`): Уникальный номер заявки.
-   `requestStatus` (`RequestStatus`): Текущий статус заявки. См. [Перечисление RequestStatus](#перечисление-enum-requeststatus).
-   `date` (`DateTime`): Дата создания заявки.

#### Модель `RequestInformation`

Объект с полной информацией по конкретной заявке.

-   `id` (`Guid`): Уникальный номер заявки.
-   `name` (`String`): ФИО Обучающегося.
-   `requestStatus` (`RequestStatus`): Текущий статус заявки. См. [Перечисление RequestStatus](#перечисление-enum-requeststatus).
-   `date` (`DateTime`): Дата создания заявки.
-   `requestFile` (`File?`): Файл готовой справки (может отсутствовать).

### Перечисления (Enums)

#### Перечисление (ENUM) `RequestStatus`

Возможные статусы жизненного цикла заявки.

-   `New`
-   `Processing`
-   `Completed`
-   `Rejected`

#### Перечисление (ENUM) `1CStatus`

Возможные статусы ответа от системы 1С:Документооборот.

-   `Success`
-   `Failure`
